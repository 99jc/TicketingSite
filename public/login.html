<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../dist/output.css" />
    <title>XX숲 공연장</title>
  </head>
  <body>
    <div
      class="w-full h-dvh justify-center items-center flex flex-col border border-black bg-orange-200"
    >
      <h1 class="text-[50px] text-center my-10">로그인</h1>

      <form
        class="flex-1 p-10 border bg-white rounded-xl mb-10 flex flex-col items-center shadow-md"
        id="signInForm"
      >
        <div class="flex w-[400px] m-1 border border-black rounded-sm">
          <label
            class="text-[20px] h-[50px] p-2 w-[100px] text-center bg-green-300"
            >이메일</label
          >
          <input
            class="text-[20px] h-[50px] p-2 flex-1"
            type="text"
            name="email"
          />
        </div>
        <div class="flex w-[400px] m-1 border border-black bg-green-300">
          <label class="text-[20px] h-[50px] p-2 w-[100px] text-center"
            >비밀번호</label
          >
          <input
            class="text-[20px] h-[50px] p-2 flex-1"
            type="password"
            name="password"
          />
        </div>
        <button
          class="w-[400px] m-1 text-[20px] p-3 border border-black bg-green-300 hover:bg-green-400 rounded-sm"
          type="submit"
        >
          로그인
        </button>
        <a
          href="./sign-up"
          type="button"
          class="w-[400px] m-1 text-[20px] p-3 border border-black bg-green-300 hover:bg-green-400 rounded-sm text-center"
        >
          회원가입
        </a>
        <a
          href="/"
          class="w-[400px] m-1 text-[20px] p-3 border border-black hover:bg-black hover:bg-opacity-10 rounded-sm text-center"
        >
          홈으로
        </a>
      </form>
    </div>
    <script>
      async function handleSubmit(event) {
        event.preventDefault();

        const formData = new FormData(event.target);
        const data = Object.fromEntries(formData.entries());

        await fetch("/api/sign-in", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        });
        window.location.href = "/";
      }

      document
        .getElementById("signInForm")
        .addEventListener("submit", handleSubmit);
    </script>
  </body>
</html>
